Index: linux-2.6.36_MTK4110/drivers/mtd/maps/ralink-flash.h
===================================================================
--- linux-2.6.36_MTK4110.orig/drivers/mtd/maps/ralink-flash.h	2013-07-06 10:41:42.475352809 +0800
+++ linux-2.6.36_MTK4110/drivers/mtd/maps/ralink-flash.h	2013-07-06 10:41:51.887064748 +0800
@@ -1,6 +1,10 @@
 #ifndef __RALINK_FLASH_H__
 #define __RALINK_FLASH_H__
 
+#ifdef LITEON_SRC_VALID
+#define FLASH_SECTOR_SIZE 0x10000
+#endif
+
 #if defined (CONFIG_RT2880_FLASH_32M)
 #define MTD_BOOT_PART_SIZE	0x40000
 #define	MTD_CONFIG_PART_SIZE	0x20000
@@ -12,26 +16,23 @@
 #define MTD_CONFIG_PART_SIZE    0x20000
 #define MTD_FACTORY_PART_SIZE   0x20000
 #else
+/*modify for wp777 nvram, daniel@liteon,2012-10-15----->*/
+#ifdef LITEON_SRC_VALID
+#define MTD_BOOT_PART_SIZE	(3*FLASH_SECTOR_SIZE)
+#define MTD_CONFIG_PART_SIZE	FLASH_SECTOR_SIZE
+#define MTD_NVRAM_PART_SIZE	FLASH_SECTOR_SIZE
+#define MTD_BOARD_DATA_PART_SIZE	FLASH_SECTOR_SIZE
+#define MTD_FACTORY_PART_SIZE	FLASH_SECTOR_SIZE
+#else
 #define MTD_BOOT_PART_SIZE	0x30000
 #define	MTD_CONFIG_PART_SIZE	0x10000
 #define	MTD_FACTORY_PART_SIZE	0x10000
-#endif
-#endif
-
+#endif //LITEON_SRC_VALID
+/*<-----daniel@liteon,2012-10-15*/
 
-#ifdef CONFIG_RT2880_ROOTFS_IN_FLASH
-#ifdef CONFIG_ROOTFS_IN_FLASH_NO_PADDING
-#define CONFIG_MTD_KERNEL_PART_SIZ 0
 #endif
-#define MTD_ROOTFS_PART_SIZE	IMAGE1_SIZE - (MTD_BOOT_PART_SIZE + MTD_CONFIG_PART_SIZE \
-					+ MTD_FACTORY_PART_SIZE + CONFIG_MTD_KERNEL_PART_SIZ)
-#define	MTD_KERN_PART_SIZE	CONFIG_MTD_KERNEL_PART_SIZ
-#else
-#define MTD_KERN_PART_SIZE	IMAGE1_SIZE - (MTD_BOOT_PART_SIZE + MTD_CONFIG_PART_SIZE \
-					+ MTD_FACTORY_PART_SIZE)
 #endif
 
-
 #ifdef CONFIG_DUAL_IMAGE
 #if defined (CONFIG_RT2880_FLASH_2M)
 #define IMAGE1_SIZE		0x100000
@@ -66,8 +67,25 @@
 #elif defined (CONFIG_RT2880_FLASH_32M)
 #define IMAGE1_SIZE		0x2000000
 #else
-#define IMAGE1_SIZE		CONFIG_MTD_PHYSMAP_LEN
+#define IMAGE1_SIZE	CONFIG_MTD_PHYSMAP_LEN
+#endif
 #endif
+
+#ifdef CONFIG_RT2880_ROOTFS_IN_FLASH
+#ifdef CONFIG_ROOTFS_IN_FLASH_NO_PADDING
+#define CONFIG_MTD_KERNEL_PART_SIZ 0
+#endif
+
+/*modify for wp777 nvram, daniel@liteon,2012-10-15----->*/
+#ifdef LITEON_SRC_VALID
+#define MTD_ROOTFS_PART_SIZE	IMAGE1_SIZE - (MTD_BOOT_PART_SIZE + MTD_CONFIG_PART_SIZE + MTD_FACTORY_PART_SIZE +  MTD_NVRAM_PART_SIZE + MTD_BOARD_DATA_PART_SIZE + CONFIG_MTD_KERNEL_PART_SIZ)							
+#else		
+#define MTD_ROOTFS_PART_SIZE	IMAGE1_SIZE - (MTD_BOOT_PART_SIZE + MTD_CONFIG_PART_SIZE + MTD_FACTORY_PART_SIZE +  CONFIG_MTD_KERNEL_PART_SIZ)										
+#endif //LITEON_SRC_VALID
+/*<-----daniel@liteon,2012-10-15*/						
+#define	MTD_KERN_PART_SIZE	CONFIG_MTD_KERNEL_PART_SIZ
+#else
+#define MTD_KERN_PART_SIZE	IMAGE1_SIZE - (MTD_BOOT_PART_SIZE + MTD_CONFIG_PART_SIZE + MTD_FACTORY_PART_SIZE)
 #endif
 
 #define BOOT_FROM_NOR	0
